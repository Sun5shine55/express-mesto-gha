[![Tests](../../actions/workflows/tests-13-sprint.yml/badge.svg)](../../actions/workflows/tests-13-sprint.yml) [![Tests](../../actions/workflows/tests-14-sprint.yml/badge.svg)](../../actions/workflows/tests-14-sprint.yml)
# Проект Mesto фронтенд + бэкенд
Авторизация и регистрация пользователя
* Добавлены email и password к схеме пользователя
Регистрация пользователей по почте и паролю. Поэтому в схему пользователя добавили два поля: email и password. У каждого пользователя email уникальный и валидируется на соответствие схеме электронной почты.
Для валидации используется модуль validator.
* Доработан контроллер createUser
Помимо полей name, about и avatar, он добавляет поля email и password. Хешируется пароль, прежде чем сохранять его в базу. Если при создании пользователя поля name, about и avatar не были указаны, то им присваиваются стандартные значения. Для этих полей используем следующие стандартные значения из макета предыдущих спринтов:
name — «Жак-Ив Кусто»;
about — «Исследователь»;
avatar — ссылка;
* Создан контроллер login
В файле controllers/users.js создан контроллер login, который получает из запроса почту и пароль и проверяет их. Если почта и пароль правильные, контроллер создаёт JWT сроком на неделю. В пейлоуд токена записывает только свойство _id, которое содержит идентификатор пользователя.
* Создан роут для логина и регистрации
В app.js созданы два обработчика POST-запросов на два роута: '/signin' и '/signup'. Им переданы соответствующие контроллеры — login и createUser.
* Сделан мидлвэр для авторизации
В файле middlewares/auth.js создан мидлвэр для авторизации. Он верифицирует токен из заголовков. Если с токеном всё в порядке, мидлвэр добавляет пейлоуд токена в объект запроса и вызывает next. Если с токеном что-то не так, мидлвэр возвращает ошибку 401.
* Создан контроллер и роут для получения информации о пользователе
GET /users/me
* API защищён авторизацией на всех маршрутах, кроме страницы регистрации и логина. При попытке неавторизованного пользователя обратиться к защищённому маршруту возвращается 401 ошибка.
* У пользователя отсутствует право удалять карточки других пользователей. 

## Директории

`/routes` — папка с файлами роутера  
`/controllers` — папка с файлами контроллеров пользователя и карточки   
`/models` — папка с файлами описания схем пользователя и карточки  

## Запуск проекта

`npm run start` — запускает сервер   
`npm run dev` — запускает сервер с hot-reload


https://sun5shine55.github.io/express-mesto-gha/